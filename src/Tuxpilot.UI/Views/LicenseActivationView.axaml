<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:Tuxpilot.UI.ViewModels"
             x:Class="Tuxpilot.UI.Views.LicenseActivationView"
             x:DataType="vm:LicenseActivationViewModel">

    <Design.DataContext>
        <vm:LicenseActivationViewModel/>
    </Design.DataContext>

    <Grid RowDefinitions="*" Background="{DynamicResource BackgroundPrimary}">
        
        <!-- Contenu principal centr√© -->
        <Border MaxWidth="600" 
                HorizontalAlignment="Center" 
                VerticalAlignment="Center"
                Padding="40">
            
            <StackPanel Spacing="32">
                
                <!-- Logo et titre -->
                <StackPanel Spacing="16" HorizontalAlignment="Center">
                    <TextBlock Text="üõ°Ô∏è" 
                              FontSize="64" 
                              HorizontalAlignment="Center"/>
                    <TextBlock Text="Bienvenue sur Tuxpilot" 
                              FontSize="28" 
                              FontWeight="Bold"
                              HorizontalAlignment="Center"
                              Foreground="{DynamicResource TextPrimary}" />
                    <TextBlock Text="Activez votre licence pour commencer" 
                              FontSize="16" 
                              Foreground="{DynamicResource TextMuted}"
                              HorizontalAlignment="Center"/>
                </StackPanel>
                
                <!-- Formulaire d'activation -->
                <StackPanel Spacing="20" 
                           IsVisible="{Binding !IsSuccess}">
                    
                    <!-- Input cl√© de licence -->
                    <StackPanel Spacing="8">
                        <TextBlock Text="Cl√© de licence" 
                                  FontSize="14" 
                                  FontWeight="SemiBold" 
                                  Foreground="{DynamicResource TextPrimary}"/>
                        <TextBox Text="{Binding LicenseKey}" 
                                Watermark="EA-2024-XXXX-XXXX"
                                FontFamily="Consolas, monospace"
                                FontSize="16"
                                Padding="12"
                                CornerRadius="8"
                                MaxLength="20"/>
                        <TextBlock Text="Format: EA-2024-ABCD-1234 (re√ßue par email)" 
                                  FontSize="12" 
                                  Foreground="{DynamicResource TextSecondary}"/>
                    </StackPanel>
                    
                    <!-- Bouton Activer -->
                    <Button Content="üîì Activer la licence"
                           Command="{Binding ActivateLicenseCommand}"
                           IsEnabled="{Binding !IsActivating}"
                           HorizontalAlignment="Stretch"
                           Background="{DynamicResource Primary}"
                           Foreground="White"
                           Padding="16"
                           FontSize="16"
                           FontWeight="SemiBold"
                           CornerRadius="8"/>
                    
                    <!-- S√©parateur -->
                    <Grid ColumnDefinitions="*,Auto,*" 
                         Margin="0,8,0,8">
                        <Border Grid.Column="0" 
                               Height="1" 
                               Background="{DynamicResource BackgroundTertiary}" 
                               VerticalAlignment="Center"/>
                        <TextBlock Grid.Column="1" 
                                  Text="ou" 
                                  Foreground="{DynamicResource TextSecondary}" 
                                  Margin="16,0"/>
                        <Border Grid.Column="2" 
                               Height="1" 
                               Background="{DynamicResource BackgroundTertiary}" 
                               VerticalAlignment="Center"/>
                    </Grid>
                    
                    <!-- Bouton Community -->
                    <Button Content="Continuer avec la version Community (gratuite)"
                           Command="{Binding UseCommunityCommand}"
                           HorizontalAlignment="Stretch"
                           Background="{DynamicResource BackgroundSecondary}"
                           Foreground="{DynamicResource TextPrimary}"                         
                           Padding="16"
                           FontSize="14"
                           CornerRadius="8"/>
                    
                    <!-- Message d'erreur -->
                    <Border Background="{DynamicResource BackgroundDanger}" 
                           CornerRadius="8" 
                           Padding="16"
                           BorderBrush="{DynamicResource Danger}"
                           BorderThickness="2"
                           IsVisible="{Binding IsError}">
                        <TextBlock Text="{Binding Message}" 
                                  Foreground="{DynamicResource TextDanger}"
                                  TextWrapping="Wrap"/>
                    </Border>
                    
                    <!-- Loading -->
                    <StackPanel Spacing="12" 
                               HorizontalAlignment="Center"
                               IsVisible="{Binding IsActivating}">
                        <ProgressBar IsIndeterminate="True" 
                                    Width="200" 
                                    Height="4"/>
                        <TextBlock Text="Validation en cours..." 
                                  Foreground="{DynamicResource TextMuted}"
                                  FontSize="14"/>
                    </StackPanel>
                    
                </StackPanel>
                
                <!-- Message de succ√®s -->
                <Border Background="{DynamicResource BackgroundSuccess}" 
                       CornerRadius="12" 
                       Padding="32"
                       BorderBrush="{DynamicResource Success}"
                       BorderThickness="2"
                       IsVisible="{Binding IsSuccess}">
                    <StackPanel Spacing="20">
                        
                        <TextBlock Text="‚úÖ" 
                                  FontSize="48" 
                                  HorizontalAlignment="Center"/>
                        
                        <TextBlock Text="{Binding Message}" 
                                  Foreground="{DynamicResource TextSuccess}"
                                  FontSize="14"
                                  TextWrapping="Wrap"
                                  TextAlignment="Center"
                                  HorizontalAlignment="Center"/>
                        
                        <!-- Infos licence -->
                        <StackPanel Spacing="8" 
                                   IsVisible="{Binding ActivatedLicense, Converter={x:Static ObjectConverters.IsNotNull}}">
                            <TextBlock Text="Type de licence :" 
                                      Foreground="{DynamicResource TextSuccess}" 
                                      FontSize="14"
                                      HorizontalAlignment="Center"/>
                            <!--<TextBlock Text="{Binding ActivatedLicense.TypeDisplayName}" 
                                      Foreground="{DynamicResource TextSuccess}" 
                                      FontSize="20"
                                      FontWeight="Bold"
                                      HorizontalAlignment="Center"/>-->
                        </StackPanel>
                        
                        <Button Content="üöÄ Commencer √† utiliser Tuxpilot"
                               Background="{DynamicResource Success}"
                               Foreground="White"
                               Padding="16"
                               FontSize="16"
                               FontWeight="SemiBold"
                               CornerRadius="8"
                               HorizontalAlignment="Center"/>
                        
                    </StackPanel>
                </Border>
                
                <!-- Infos Early Access en bas -->
                <Border Background="{DynamicResource BackgroundWarning}" 
                       CornerRadius="8" 
                       Padding="16"
                       BorderBrush="{DynamicResource Warning}"
                       BorderThickness="1"
                       IsVisible="{Binding !IsSuccess}">
                    <StackPanel Spacing="8">
                        <TextBlock Text="üéÅ Programme Early Access" 
                                  Foreground="{DynamicResource TextWarning}" 
                                  FontSize="14"
                                  FontWeight="SemiBold"/>
                        <TextBlock TextWrapping="Wrap" 
                                  Foreground="{DynamicResource TextWarning}"
                                  FontSize="13">
                            ‚Ä¢ 1 an de version Pro gratuite (180‚Ç¨)
                            <LineBreak/>
                            ‚Ä¢ 50% de r√©duction √† vie apr√®s (7,50‚Ç¨/mois au lieu de 15‚Ç¨)
                            <LineBreak/>
                            ‚Ä¢ Acc√®s prioritaire aux nouvelles fonctionnalit√©s
                        </TextBlock>
                    </StackPanel>
                </Border>
                
            </StackPanel>
            
        </Border>
        
    </Grid>

</UserControl>