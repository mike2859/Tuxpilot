<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:Tuxpilot.UI.ViewModels"
             x:Class="Tuxpilot.UI.Views.MisesAJourView"
             x:DataType="vm:MisesAJourViewModel">

    
    <Design.DataContext>
        <vm:MisesAJourViewModel/>
    </Design.DataContext>
    
    
    <ScrollViewer>
        <StackPanel Margin="32" Spacing="24">
            
            <!-- Header -->
            <StackPanel Spacing="8">
                <TextBlock Text="ðŸ”„ Mises Ã  jour" 
                          FontSize="28" 
                          FontWeight="Bold"/>
                <TextBlock Text="GÃ©rez les mises Ã  jour de votre systÃ¨me Linux" 
                          FontSize="14"
                          Foreground="Gray"/>
            </StackPanel>
            
            <!-- Indicateur de chargement -->
            <ProgressBar IsIndeterminate="True"
                        IsVisible="{Binding IsLoading}"
                        Height="4"/>
            
            <!-- Message de statut -->
            <Border CornerRadius="8"
                    Padding="16"
                    BorderThickness="2"
                    Background="{Binding BackgroundColor}"
                    BorderBrush="{Binding BorderColor}">
               
                
                <Grid ColumnDefinitions="*,Auto">
                    <TextBlock Grid.Column="0"
                               Text="{Binding MessageStatut}"
                               FontSize="16"
                               FontWeight="SemiBold"
                               VerticalAlignment="Center"
                               Foreground="#111827"/>
        
                    <Button Grid.Column="1"
                            Content="ðŸ”„ VÃ©rifier"
                            Command="{Binding VerifierMisesAJourCommand}"
                            Padding="12,8"
                            Margin="16,0,0,0"
                            FontSize="13"
                            Background="Transparent"
                            BorderBrush="#D1D5DB"
                            BorderThickness="1"
                            CornerRadius="6"
                            Cursor="Hand"/>
                </Grid>
            </Border>
            
            <!-- Liste des mises Ã  jour -->
          <Border Background="White"
        CornerRadius="12"
        Padding="24"
        BorderBrush="#E5E7EB"
        BorderThickness="1"
        IsVisible="{Binding MisesAJourDisponibles}">
    <DockPanel LastChildFill="True">
        
        <!-- Header avec bouton - DockPanel.Dock="Top" pour le fixer en haut -->
        <Grid DockPanel.Dock="Top" 
              ColumnDefinitions="*,Auto"
              Margin="0,0,0,16">
            <TextBlock Grid.Column="0"
                      Text="ðŸ“¦ Paquets disponibles" 
                      FontSize="18" 
                      FontWeight="SemiBold"/>
            
            <Button Grid.Column="1"
                    Content="â¬†ï¸ Tout installer"
                    Command="{Binding InstallerToutCommand}"
                    Padding="16,10"
                    Background="#3B82F6"
                    Foreground="White"
                    BorderThickness="0"
                    CornerRadius="8"
                    Cursor="Hand"
                    FontWeight="SemiBold"/>
        </Grid>
        
        <!-- Liste scrollable - prend tout l'espace restant -->
        <ScrollViewer HorizontalScrollBarVisibility="Disabled"
                      VerticalScrollBarVisibility="Auto">
            <ItemsControl ItemsSource="{Binding Paquets}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Background="#F9FAFB"
                                CornerRadius="8"
                                Padding="16"
                                Margin="0,0,0,8">
                            <Grid ColumnDefinitions="Auto,*,Auto">
                                
                                <!-- IcÃ´ne -->
                                <Border Grid.Column="0"
                                        Width="40" Height="40"
                                        CornerRadius="8"
                                        Background="#DBEAFE"
                                        VerticalAlignment="Center">
                                    <TextBlock Text="ðŸ“¦" 
                                              FontSize="20"
                                              HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                                </Border>
                                
                                <!-- Infos -->
                                <StackPanel Grid.Column="1" 
                                           Margin="16,0,0,0"
                                           VerticalAlignment="Center"
                                           Spacing="4">
                                    <TextBlock Text="{Binding Nom}" 
                                              FontSize="14"
                                              FontWeight="SemiBold"
                                              Foreground="#111827"/>
                                    <TextBlock Text="{Binding VersionText}" 
                                              FontSize="12"
                                              Foreground="#6B7280"/>
                                    <TextBlock Text="{Binding Depot, StringFormat='DÃ©pÃ´t: {0}'}" 
                                              FontSize="11"
                                              Foreground="#9CA3AF"/>
                                </StackPanel>
                                
                                <!-- Badge -->
                                <Border Grid.Column="2"
                                        Background="#DBEAFE"
                                        CornerRadius="12"
                                        Padding="10,6"
                                        VerticalAlignment="Center"
                                        Margin="16,0,0,0">
                                    <TextBlock Text="Nouveau" 
                                              FontSize="11"
                                              FontWeight="SemiBold"
                                              Foreground="#1E40AF"/>
                                </Border>
                                
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
        
    </DockPanel>
</Border>
            
            <!-- Message si aucune mise Ã  jour -->
            <Border Background="White"
                    CornerRadius="12"
                    Padding="48,32"
                    BorderBrush="#E5E7EB"
                    BorderThickness="1"
                    IsVisible="{Binding !MisesAJourDisponibles}">
                <StackPanel Spacing="16" HorizontalAlignment="Center">
                    <TextBlock Text="âœ…" 
                              FontSize="64"
                              HorizontalAlignment="Center"/>
                    <TextBlock Text="Aucune mise Ã  jour disponible" 
                              FontSize="20"
                              FontWeight="SemiBold"
                              HorizontalAlignment="Center"/>
                    <TextBlock Text="Votre systÃ¨me est Ã  jour !" 
                              FontSize="14"
                              Foreground="Gray"
                              HorizontalAlignment="Center"/>
                </StackPanel>
            </Border>
            
        </StackPanel>
    </ScrollViewer>
</UserControl>